{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "elgato-key-light",
  "title": "Elgato Key Light",
  "description": "Control your Elgato Key Lights with ease",
  "icon": "icon.png",
  "author": "thomas",
  "contributors": [
    "omarshahine"
  ],
  "license": "MIT",
  "commands": [
    {
      "name": "discoverLights",
      "title": "Discover Lights",
      "subtitle": "Elgato Key Light",
      "description": "Force a fresh discovery of Key Lights on your network",
      "mode": "no-view"
    },
    {
      "name": "toggle",
      "title": "Toggle Lights",
      "subtitle": "Elgato Key Light",
      "description": "Toggles all connected Key Lights on or off",
      "mode": "no-view"
    },
    {
      "name": "increaseBrightness",
      "title": "Increase Brightness",
      "subtitle": "Elgato Key Light",
      "description": "Increase brightness of Key Light by 5%",
      "mode": "no-view"
    },
    {
      "name": "decreaseBrightness",
      "title": "Decrease Brightness",
      "subtitle": "Elgato Key Light",
      "description": "Decrease brightness of Key Light by 5%",
      "mode": "no-view"
    },
    {
      "name": "increaseTemperature",
      "title": "Warmer Color Temperature",
      "subtitle": "Elgato Key Light",
      "description": "Make light color warmer (lower Kelvin)",
      "mode": "no-view"
    },
    {
      "name": "decreaseTemperature",
      "title": "Cooler Color Temperature",
      "subtitle": "Elgato Key Light",
      "description": "Make light color cooler (higher Kelvin)",
      "mode": "no-view"
    },
    {
      "name": "apply-preset",
      "title": "Apply Preset",
      "subtitle": "Elgato Key Light",
      "description": "Create, edit, and activate presets for your Key Lights",
      "mode": "view"
    }
  ],
  "tools": [
    {
      "name": "apply-preset",
      "title": "Apply Preset",
      "description": "Apply a preset to your Elgato Key Lights",
      "instructions": "Tool to apply a preset to all connected Key Lights\n\n@example // Apply the night preset by name\napply-preset({ presetName: \"night\" })\n@example // Apply the warm preset by name\napply-preset({ presetName: \"warm\" })\n@example // Apply by ID\napply-preset({ presetId: \"default\" })\n@param input.presetName, ,- The name of the preset (case-insensitive), e.g., \"night\", \"day\", \"warm\", \"cold\", \"default\"\n@param input.presetId, ,- The ID of the preset, e.g., \"night\", \"day\", \"warm\", \"cold\", \"default\"\n\nWhen a user asks to apply a preset like \"switch to night mode\" or \"apply the warm preset\",\nextract the preset name and pass it to this tool.",
      "input": {
        "type": "object",
        "properties": {
          "presetId": {
            "type": "string"
          },
          "presetName": {
            "type": "string"
          }
        },
        "required": []
      },
      "confirmation": false
    },
    {
      "name": "create-preset",
      "title": "Create Preset",
      "description": "Create a new preset for your Elgato Key Lights",
      "instructions": "Tool to create a new preset for Key Lights",
      "input": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "brightness": {
            "type": "number"
          },
          "temperature": {
            "type": "number"
          }
        },
        "required": [
          "name"
        ]
      },
      "confirmation": false
    },
    {
      "name": "get-presets",
      "title": "Get Presets",
      "description": "Get all presets for your Elgato Key Lights",
      "instructions": "Tool to get all saved presets",
      "confirmation": false
    },
    {
      "name": "get-lights",
      "title": "Get Lights",
      "description": "Get information about your connected Elgato Key Lights",
      "instructions": "Tool to get information about discovered Key Lights\n\nNote: Due to API limitations, this tool can only return basic information\nabout the lights (name, address) rather than their full settings.",
      "confirmation": false
    },
    {
      "name": "turn-on",
      "title": "Turn On",
      "description": "Turn on your Elgato Key Lights",
      "instructions": "Tool to turn on all connected Key Lights",
      "confirmation": false
    },
    {
      "name": "turn-off",
      "title": "Turn Off",
      "description": "Turn off your Elgato Key Lights",
      "instructions": "Tool to turn off all connected Key Lights",
      "confirmation": false
    },
    {
      "name": "update-settings",
      "title": "Update Settings",
      "description": "Update the settings of your Elgato Key Lights",
      "instructions": "Tool to update the settings of all connected Key Lights",
      "input": {
        "type": "object",
        "properties": {
          "brightness": {
            "type": "number",
            "description": "Brightness percentage (0-100)"
          },
          "temperature": {
            "type": "number",
            "description": "Temperature percentage (0-100)\n0 = cool (high Kelvin), 100 = warm (low Kelvin)"
          },
          "on": {
            "type": "boolean",
            "description": "Power state"
          }
        },
        "required": [],
        "description": "Input parameters for updating Key Light settings"
      },
      "confirmation": false
    }
  ],
  "dependencies": {
    "@raycast/api": "1.95.0",
    "@raycast/utils": "1.19.1",
    "axios": "^1.6.2",
    "bonjour-service": "^1.1.1"
  },
  "devDependencies": {
    "@raycast/eslint-config": "^1.0.0",
    "@types/node": "^20.10.5",
    "@typescript-eslint/eslint-plugin": "^6.15.0",
    "@typescript-eslint/parser": "^6.15.0",
    "eslint": "^8.56.0",
    "eslint-config-prettier": "^9.1.0",
    "prettier": "^3.1.1",
    "typescript": "^5.3.3"
  },
  "ai": {
    "instructions": "You are a helpful assistant that can help with tasks related to the Elgato Key Light. You can do things like turn the lights on and off, apply a preset or make new presets. When creating presets, use these guidelines for common scenarios: - Sunny day: brightness 90%, temperature 80% (warm) - Night: brightness 10%, temperature 10% (very warm) - Day: brightness 80%, temperature 60% (moderately warm) - Cold/Cool: brightness 50%, temperature 20% (cool white) - Warm: brightness 50%, temperature 80% (warm white). When creating presets, always convert the preset name to Title Case (e.g., 'sunny day' becomes 'Sunny Day'). When applying presets, use the 'presetName' parameter with the lowercase preset name (e.g., 'night' not 'Night'). Match these standard values for consistent lighting presets.",
    "evals": [
      {
        "input": "@elgato-key-light turn lights on",
        "mocks": {
          "turn-on": "Successfully called \"turn-on\""
        },
        "expected": [
          {
            "callsTool": {
              "arguments": {},
              "name": "turn-on"
            }
          }
        ]
      },
      {
        "input": "@elgato-key-light apply my night preset",
        "mocks": {
          "get-presets": [
            {
              "id": "default",
              "name": "Default",
              "settings": {
                "brightness": 20,
                "temperature": 50
              }
            },
            {
              "icon": "üåô",
              "id": "night",
              "name": "Night",
              "settings": {
                "brightness": 10,
                "temperature": 10
              }
            },
            {
              "icon": "‚òÄÔ∏è",
              "id": "day",
              "name": "Day",
              "settings": {
                "brightness": 80,
                "temperature": 60
              }
            },
            {
              "icon": "üî•",
              "id": "warm",
              "name": "Warm",
              "settings": {
                "brightness": 50,
                "temperature": 80
              }
            },
            {
              "icon": "‚ùÑÔ∏è",
              "id": "cold",
              "name": "Cold",
              "settings": {
                "brightness": 50,
                "temperature": 20
              }
            }
          ],
          "apply-preset": "Successfully called \"apply-preset\""
        },
        "expected": [
          {
            "callsTool": {
              "arguments": {
                "presetName": "night"
              },
              "name": "apply-preset"
            }
          }
        ]
      },
      {
        "input": "@elgato-key-light create me a new preset for a sunny day",
        "mocks": {
          "create-preset": {
            "data": {
              "id": "09f87aee-b4fa-4b86-94e7-a4bc8f59fe8d",
              "name": "Sunny Day",
              "settings": {
                "brightness": 90,
                "temperature": 80
              }
            },
            "message": "Created preset \"Sunny Day\"",
            "success": true
          }
        },
        "expected": [
          {
            "callsTool": {
              "arguments": {
                "brightness": 90,
                "name": "Sunny Day",
                "temperature": 80
              },
              "name": "create-preset"
            }
          }
        ]
      }
    ]
  }
}